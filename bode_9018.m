L1=130e-6;
L2=700e-6;
C=22e-6;
r=0.01;
c0=100e-6;
R0=800;
d=0.658;
A1=[0 0 0 0 0 0;0 0 (1/L2) 0 0 0;0 (-1/C) 0 0 0 0;0 0 (-1/(C*r)) (-1/(C*r)) (1/(C*r)) 0;0 0 (1/(C*r)) (1/(C*r)) (-1/(C*r)) 0;0 0 0 0 0 ((-1)/(R0*C0))];
A2=[0 0 (-1/L1) 0 0 0;0 0 (1/L2) (-1/L2) 0 0; (1/C) (-1/C) 0 0 0 0;0 (1/C) 0 ((-1)/(C*r)) ((-1)/(C*r)) ((1)/(C*r));0 0 0 ((-1)/(C*r)) ((-1)/(C*r)) ((1)/(C*r)); 0 0 0 (1/(C0*r)) (1/(C0*r)) -((R0+r)/(C0*r*R0))];
B1=[(1/L1);0;0;0;0;0];
B2=B1;
C1=[0 0 0 0 0 1];
C2=C1;
A=(A1.*d)+(A2.*(1-d));
B=(B1.*d)+(B2.*(1-d));
C=(C1.*d)+(C2.*(1-d));
X=(-inv(A))*B*20;
F=((A1-A2)*X)+((B1-B2)*20);
s=sym('s');
I=eye(6);
T1=C*(inv((s*I)-A))*F;
s=tf('s')
fraction=T1;
T2=simplifyFraction(fraction);
sys=T2
%%%%sys =
 
-(498316333192845310229467832453848483293764873359223422976*s^5 + 4530148483566459139260911507100901608001193316922088868074749952*s^4 + 9223534855950566198266972534502079293674648815538727231532051030081536*s^3 - 263877061589297156923008405364010165795251964995981211991117277766445170688*s^2 + 1784811704324234766595648745388984771621861456726341934364158916024048067543040*s - 23483504111285861864353225100392316469170999528353939711720291924192441094377324195)/(137438953472*(247725563118443201401336714210327257939968*s^6 + 2336775812960075378542474474374796387728649879552*s^5 + 5114052819749571381532264426491834660289427114328850432*s^4 + 330544730112446267156215263388887997565516010072571904000*s^3 + 599935494145237101872928198488442102235753057227082326186393600*s^2 + 7110392578812893744557112026114756672973781918963236060390578800*s + 78712179209320869727942642955620685287610577216144093887516620934625))
 % next type sys= and paste the above equation, press enter as shown below
sys=-(498316333192845310229467832453848483293764873359223422976*s^5 + 4530148483566459139260911507100901608001193316922088868074749952*s^4 + 9223534855950566198266972534502079293674648815538727231532051030081536*s^3 - 263877061589297156923008405364010165795251964995981211991117277766445170688*s^2 + 1784811704324234766595648745388984771621861456726341934364158916024048067543040*s - 23483504111285861864353225100392316469170999528353939711720291924192441094377324195)/(137438953472*(247725563118443201401336714210327257939968*s^6 + 2336775812960075378542474474374796387728649879552*s^5 + 5114052819749571381532264426491834660289427114328850432*s^4 + 330544730112446267156215263388887997565516010072571904000*s^3 + 599935494145237101872928198488442102235753057227082326186393600*s^2 + 7110392578812893744557112026114756672973781918963236060390578800*s + 78712179209320869727942642955620685287610577216144093887516620934625))

sys =
 
         -4.983e56 s^5 - 4.53e63 s^4 - 9.224e69 s^3 + 2.639e74 s^2 - 1.785e78 s + 2.348e82
  ------------------------------------------------------------------------------------------------
  3.405e52 s^6 + 3.212e59 s^5 + 7.029e65 s^4 + 4.543e67 s^3 + 8.245e73 s^2 + 9.772e74 s + 1.082e79
 
Continuous-time transfer function.

bode(sys)
margin(sys)
 con=0.000015+(0.004/s);
sys1=con*sys

sys1 =
 
                                                                                            
  -7.475e51 s^6 - 6.795e58 s^5 - 1.384e65 s^4 + 3.921e69 s^3 - 2.572e73 s^2 + 3.451e77 s    
                                                                                            
                                                                                  + 9.393e79
                                                                                            
  ------------------------------------------------------------------------------------------
                                                                                            
  3.405e52 s^7 + 3.212e59 s^6 + 7.029e65 s^5 + 4.543e67 s^4 + 8.245e73 s^3 + 9.772e74 s^2   
                                                                                            
                                                                                + 1.082e79 s
                                                                                            
 
Continuous-time transfer function.

bode(sys1)
margin(sys1)
